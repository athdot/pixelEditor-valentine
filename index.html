<!DOCTYPE html>
<html>
  <head>
    <title>Pixel Editor - Valentines Day</title>
  </head>
  <body>
    <input id="colorHolder" type="text" value="green" />
      <input type="color"  onfocusout="myFunction()" id="color" name="favcolor" value="#ff0000" style=" display:none; padding: 0; border: none; background: none; width: 40px; height: 40px; -webkit-border-radius: 20px; -moz-border-radius: 20px; border-radius: 20px;">
    <div id="color2" style="width: 40px; height: 40px; border-radius: 20px; position:absolute; right: 0;" onclick="clickColor()">
      <script>
        var co = document.getElementById("color2");
        var current = document.getElementById("color");
        co.style.backgroundColor = current.value;
        function clickColor(){
          current.click();
        }
          var letsGo = setInterval(function(){
             co.style.backgroundColor = current.value;
            colorChanged();
          },10);
      </script>
    </div>  
    <input id="zoom" type="text" value="100"/>
    <br>
    Width: <input id="w" type="text" />
    | Height: <input id="h" type="text" />
    <!-- COME ON -->
    <!-- JEEBUS CHIPS -->
    <button onclick="go()">Go!</button>
    <button onclick="save()">Save</button>
    <input type='file' onchange="readURL(this);" />
    <img id="blah" src="#" alt="your image" />
    <button onclick="load()">Load In</button>
    <iframe id="yeee" src="frameable.html" style="width: 100%; position:absolute; left: 0; top: 100px; border:none;" onload="sassy()">Your Browser does not support this frame</iframe>
       <script>
         function colorChanged(){
          var inpt = document.getElementById("color").value; 
          var col = document.getElementById("colorHolder");
          col.value = inpt;
           myFunction();
         }
         function myFunction(){
           var co = document.getElementById("color2");
            var current = document.getElementById("color");
            co.style.backgroundColor = current.value;
         }
         function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah')
                    .attr('src', e.target.result)
                    .width(150)
                    .height(200);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }
         var isChrome = !!window.chrome && !!window.chrome.webstore;
         if(!isChrome){
           window.location.href = "https://athdot.github.io/pixelEditor-valentine/useGoogle.html";
         }
      var ye = document.getElementById("yeee");
      ye.style.height = window.innerHeight-100 + "px";
      function go(){
      var w = document.getElementById("w").value;
      var h = document.getElementById("h").value;
      document.getElementById("yeee").contentWindow.newImage(w,h);
      }
      window.onresize = function(){
        ye.style.height = window.innerHeight-100 + "px";
      }
      function save(){
        document.getElementById("yeee").contentWindow.exportImage("sassy");
      }
      function load(){
        var img = document.getElementById("blah");
        document.getElementById("yeee").contentWindow.loadImage(img);
      }
    </script>
  </body>
</html>
